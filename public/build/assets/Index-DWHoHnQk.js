import{c as de,u as pe,a as Z,j as s,s as Q,r as ee,L as he}from"./app-B6r_TxPj.js";import{u as ue,a as ce,s as ye,K as ge,P as _e,b as je,S as be,v as Se,D as ve,c as Re,d as Ne,C as Ce}from"./sortable.esm-CGZexLxI.js";import{A as we}from"./app-layout-D7rl8n8V.js";import{T as Ie,S as se,a as ie,R as ke}from"./index-BZ9BXEnJ.js";import{R as ae}from"./SafetyCertificateOutlined-DbWOw5Tm.js";import{B as te}from"./ContextIsolator-Bw6ExzQV.js";import{s as re}from"./index-B-0cTeuO.js";import{R as me}from"./BookOutlined-DiwOeDjZ.js";import{R as fe}from"./TrophyOutlined-BqKe-68Q.js";import{S as De,R as ze}from"./FilePdfOutlined-BM70oNAA.js";import{R as Ee}from"./PlusOutlined-BILouNqv.js";import{I as Te}from"./index-DAm-49SJ.js";import{R as $e}from"./FileImageOutlined-BdlPDr9R.js";import{T as oe}from"./index-y3Adf1Mc.js";import{R as Pe}from"./LinkOutlined-D_y8xWvx.js";import{R as Ae,P as Le}from"./index-DlGInfqp.js";import{R as Be}from"./DeleteOutlined-D-hRQ3sF.js";import"./app-CbEWB9i-.js";import"./render-DbXmZ5EJ.js";import"./AntdIcon-CfDRJjfZ.js";import"./RocketOutlined-DIEW3gEz.js";import"./CheckOutlined-0PrG8dNn.js";import"./InfoCircleFilled-CRePx94_.js";import"./useMergedMask-DEfdHsZZ.js";import"./CloseOutlined-CdTwbbfa.js";import"./useClosable-BnFp-AKn.js";import"./ActionButton-BlecjUrr.js";const{Title:Fe,Text:q}=Ie;function Ke(t){const e=de.c(79),{id:U,certificate:r,onEdit:A,onDelete:a}=t;let L;e[0]!==U?(L={id:U},e[0]=U,e[1]=L):L=e[1];const{attributes:G,listeners:H,setNodeRef:p,transform:X,transition:B,isDragging:Y}=Ne(L);let h;e[2]!==X?(h=Ce.Transform.toString(X),e[2]=X,e[3]=h):h=e[3];const F=Y?.5:1;let k;e[4]!==h||e[5]!==F||e[6]!==B?(k={transform:h,transition:B,opacity:F},e[4]=h,e[5]=F,e[6]=B,e[7]=k):k=e[7];const K=k,M=r.file_type==="pdf";let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(Ae,{style:{fontSize:20}}),e[8]=D):D=e[8];let x;e[9]!==G||e[10]!==H?(x=s.jsx("div",{...G,...H,className:"flex cursor-grab items-center justify-center text-gray-400 hover:text-gray-600 active:cursor-grabbing",children:D}),e[9]=G,e[10]=H,e[11]=x):x=e[11];let W;e[12]!==r.image_url||e[13]!==r.name||e[14]!==M?(W=s.jsx("div",{className:"flex-shrink-0",children:r.image_url?M?s.jsx("div",{className:"flex h-12 w-16 items-center justify-center rounded bg-red-50",children:s.jsx(ze,{className:"text-2xl text-red-500"})}):s.jsx(Te,{src:r.image_url,alt:r.name,width:64,height:48,style:{objectFit:"cover",borderRadius:6},preview:{mask:"View"}}):s.jsx("div",{className:"flex h-12 w-16 items-center justify-center rounded bg-gray-100",children:s.jsx($e,{className:"text-xl text-gray-400"})})}),e[12]=r.image_url,e[13]=r.name,e[14]=M,e[15]=W):W=e[15];let z;e[16]===Symbol.for("react.memo_cache_sentinel")?(z={fontSize:14},e[16]=z):z=e[16];let O;e[17]!==r.name?(O=s.jsx(q,{strong:!0,className:"block truncate",style:z,children:r.name}),e[17]=r.name,e[18]=O):O=e[18];let E,T;e[19]===Symbol.for("react.memo_cache_sentinel")?(E={fontSize:12},T=s.jsx(ae,{className:"mr-1"}),e[19]=E,e[20]=T):(E=e[19],T=e[20]);let u;e[21]!==r.issuer?(u=s.jsxs(q,{type:"secondary",style:E,children:[T,r.issuer]}),e[21]=r.issuer,e[22]=u):u=e[22];let V;e[23]!==u||e[24]!==O?(V=s.jsxs("div",{className:"min-w-0 flex-1",children:[O,u]}),e[23]=u,e[24]=O,e[25]=V):V=e[25];let y;e[26]!==r.category?(y=r.category==="competition"?s.jsx(fe,{}):s.jsx(me,{}),e[26]=r.category,e[27]=y):y=e[27];let o;e[28]!==r.category_color||e[29]!==r.category_label||e[30]!==y?(o=s.jsx("div",{className:"flex-shrink-0",children:s.jsx(oe,{icon:y,color:r.category_color,children:r.category_label})}),e[28]=r.category_color,e[29]=r.category_label,e[30]=y,e[31]=o):o=e[31];let $;e[32]===Symbol.for("react.memo_cache_sentinel")?($={maxWidth:200},e[32]=$):$=e[32];let g;e[33]===Symbol.for("react.memo_cache_sentinel")?(g=[0,4],e[33]=g):g=e[33];let _;e[34]!==r.tags?(_=r.tags?.slice(0,2).map(Me),e[34]=r.tags,e[35]=_):_=e[35];let j;e[36]!==r.tags?(j=r.tags?.length>2&&s.jsxs(oe,{style:{fontSize:10},children:["+",r.tags.length-2]}),e[36]=r.tags,e[37]=j):j=e[37];let n;e[38]!==_||e[39]!==j?(n=s.jsx("div",{className:"flex-shrink-0",style:$,children:s.jsxs(se,{wrap:!0,size:g,children:[_,j]})}),e[38]=_,e[39]=j,e[40]=n):n=e[40];let b;e[41]===Symbol.for("react.memo_cache_sentinel")?(b={minWidth:80},e[41]=b):b=e[41];let S;e[42]===Symbol.for("react.memo_cache_sentinel")?(S={fontSize:12},e[42]=S):S=e[42];let c;e[43]!==r.issued_at?(c=s.jsx("div",{className:"flex-shrink-0",style:b,children:s.jsx(q,{type:"secondary",style:S,children:r.issued_at})}),e[43]=r.issued_at,e[44]=c):c=e[44];let v;e[45]===Symbol.for("react.memo_cache_sentinel")?(v={minWidth:40},e[45]=v):v=e[45];let R;e[46]===Symbol.for("react.memo_cache_sentinel")?(R={fontSize:14,color:"#1890ff"},e[46]=R):R=e[46];let d;e[47]!==r.display_order?(d=s.jsx("div",{className:"flex-shrink-0",style:v,children:s.jsxs(q,{strong:!0,style:R,children:["#",r.display_order]})}),e[47]=r.display_order,e[48]=d):d=e[48];let m;e[49]!==r.credential_url?(m=r.credential_url&&s.jsx(ie,{title:"View Credential",children:s.jsx(te,{type:"text",icon:s.jsx(Pe,{}),href:r.credential_url,target:"_blank",size:"small"})}),e[49]=r.credential_url,e[50]=m):m=e[50];let N;e[51]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(ke,{}),e[51]=N):N=e[51];let f;e[52]!==r.id||e[53]!==A?(f=s.jsx(ie,{title:"Edit",children:s.jsx(te,{type:"primary",icon:N,onClick:()=>A(r.id),size:"small"})}),e[52]=r.id,e[53]=A,e[54]=f):f=e[54];let C;e[55]!==r.id||e[56]!==a?(C=()=>a(r.id),e[55]=r.id,e[56]=a,e[57]=C):C=e[57];let l;e[58]===Symbol.for("react.memo_cache_sentinel")?(l={danger:!0},e[58]=l):l=e[58];let i;e[59]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(ie,{title:"Delete",children:s.jsx(te,{type:"text",danger:!0,icon:s.jsx(Be,{}),size:"small"})}),e[59]=i):i=e[59];let w;e[60]!==C?(w=s.jsx(Le,{title:"Delete Certificate",description:"This action cannot be undone.",onConfirm:C,okText:"Delete",cancelText:"Cancel",okButtonProps:l,children:i}),e[60]=C,e[61]=w):w=e[61];let P;e[62]!==m||e[63]!==f||e[64]!==w?(P=s.jsx("div",{className:"flex-shrink-0",children:s.jsxs(se,{children:[m,f,w]})}),e[62]=m,e[63]=f,e[64]=w,e[65]=P):P=e[65];let I;e[66]!==V||e[67]!==o||e[68]!==n||e[69]!==c||e[70]!==d||e[71]!==P||e[72]!==x||e[73]!==W?(I=s.jsxs("div",{className:"flex items-center gap-4 p-4",children:[x,W,V,o,n,c,d,P]}),e[66]=V,e[67]=o,e[68]=n,e[69]=c,e[70]=d,e[71]=P,e[72]=x,e[73]=W,e[74]=I):I=e[74];let J;return e[75]!==p||e[76]!==K||e[77]!==I?(J=s.jsx("div",{ref:p,style:K,className:"mb-3 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-md",children:I}),e[75]=p,e[76]=K,e[77]=I,e[78]=J):J=e[78],J}function Me(t){return s.jsx(oe,{color:t.color,style:{fontSize:10},children:t.name},t.id)}function vt(){const t=de.c(58),{certificates:e,filters:U,flash:r}=pe().props;let A;t[0]!==e.data?(A=e.data||[],t[0]=e.data,t[1]=A):A=t[1];const[a,L]=Z.useState(A),[G,H]=Z.useState(!1),[p,X]=Z.useState(U?.category||"all");let B;t[2]===Symbol.for("react.memo_cache_sentinel")?(B={coordinateGetter:ye},t[2]=B):B=t[2];const Y=ue(ce(_e),ce(ge,B));let h,F;t[3]!==r?(h=()=>{r?.success&&re.success(r.success)},F=[r],t[3]=r,t[4]=h,t[5]=F):(h=t[4],F=t[5]),Z.useEffect(h,F);let k,K;t[6]!==e.data?(k=()=>{L(e.data||[])},K=[e.data],t[6]=e.data,t[7]=k,t[8]=K):(k=t[7],K=t[8]),Z.useEffect(k,K);let M;if(t[9]===Symbol.for("react.memo_cache_sentinel")){M=i=>{const{active:w,over:P}=i;w.id!==P.id&&L(I=>{const J=I.findIndex(le=>le.id===w.id),xe=I.findIndex(le=>le.id===P.id),ne=je(I,J,xe).map(Je);return l(ne),ne})};const l=i=>{H(!0);const w=i.map(He);ee.post(Q("admin.certificate.reorder"),{items:w},{preserveScroll:!0,onSuccess:qe,onError:Ge,onFinish:()=>H(!1)})};t[9]=M}else M=t[9];let D;t[10]!==a?(D=l=>{ee.delete(Q("admin.certificate.destroy",l),{preserveScroll:!0,onSuccess:()=>{re.success("Certificate deleted!"),L(a.filter(i=>i.id!==l))}})},t[10]=a,t[11]=D):D=t[11];const x=D,W=Ve;let z;t[12]===Symbol.for("react.memo_cache_sentinel")?(z=l=>{X(l),ee.get(Q("admin.certificate.index"),{category:l==="all"?null:l},{preserveState:!0})},t[12]=z):z=t[12];const O=z;let E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E={label:"All",value:"all",icon:s.jsx(ae,{})},t[13]=E):E=t[13];let T;t[14]===Symbol.for("react.memo_cache_sentinel")?(T={label:"Learning",value:"learning",icon:s.jsx(me,{})},t[14]=T):T=t[14];let u;t[15]===Symbol.for("react.memo_cache_sentinel")?(u=[E,T,{label:"Competition",value:"competition",icon:s.jsx(fe,{})}],t[15]=u):u=t[15];const V=u;let y;t[16]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(Fe,{level:2,style:{margin:0},children:"Certificate Management"}),t[16]=y):y=t[16];let o;t[17]!==e.total?(o=s.jsxs("div",{children:[y,s.jsxs(q,{type:"secondary",children:["Drag & drop to reorder â€¢ ",e.total," ","certificates"]})]}),t[17]=e.total,t[18]=o):o=t[18];let $;t[19]===Symbol.for("react.memo_cache_sentinel")?($=V.map(Oe),t[19]=$):$=t[19];let g;t[20]!==p?(g=s.jsx(De,{value:p,onChange:O,options:$}),t[20]=p,t[21]=g):g=t[21];let _;t[22]===Symbol.for("react.memo_cache_sentinel")?(_=Q("admin.certificate.create"),t[22]=_):_=t[22];let j;t[23]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(he,{href:_,children:s.jsx(te,{type:"primary",icon:s.jsx(Ee,{}),size:"large",children:"Add Certificate"})}),t[23]=j):j=t[23];let n;t[24]!==g?(n=s.jsxs(se,{children:[g,j]}),t[24]=g,t[25]=n):n=t[25];let b;t[26]!==o||t[27]!==n?(b=s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o,n]}),t[26]=o,t[27]=n,t[28]=b):b=t[28];let S;t[29]!==G?(S=G&&s.jsx("div",{className:"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-4",children:s.jsx(q,{children:"ðŸ”„ Saving new order..."})}),t[29]=G,t[30]=S):S=t[30];let c;t[31]!==a?(c=a.map(We),t[31]=a,t[32]=c):c=t[32];let v;if(t[33]!==x||t[34]!==a){let l;t[36]!==x?(l=i=>s.jsx(Ke,{id:i.id,certificate:i,onEdit:W,onDelete:x},i.id),t[36]=x,t[37]=l):l=t[37],v=a.map(l),t[33]=x,t[34]=a,t[35]=v}else v=t[35];let R;t[38]!==v?(R=s.jsx("div",{children:v}),t[38]=v,t[39]=R):R=t[39];let d;t[40]!==c||t[41]!==R?(d=s.jsx(be,{items:c,strategy:Se,children:R}),t[40]=c,t[41]=R,t[42]=d):d=t[42];let m;t[43]!==Y||t[44]!==d?(m=s.jsx(ve,{sensors:Y,collisionDetection:Re,onDragEnd:M,children:d}),t[43]=Y,t[44]=d,t[45]=m):m=t[45];let N;t[46]!==a.length?(N=a.length===0&&s.jsxs("div",{className:"py-16 text-center text-gray-400",children:[s.jsx(ae,{style:{fontSize:48,marginBottom:16}}),s.jsx("br",{}),s.jsx(q,{type:"secondary",children:"No certificates found."})]}),t[46]=a.length,t[47]=N):N=t[47];let f;t[48]!==p||t[49]!==e.current_page||t[50]!==e.last_page?(f=e.last_page>1&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(se,{children:Array.from({length:e.last_page},(l,i)=>s.jsx(te,{type:e.current_page===i+1?"primary":"default",onClick:()=>ee.get(Q("admin.certificate.index",{page:i+1,category:p==="all"?null:p})),children:i+1},i+1))})}),t[48]=p,t[49]=e.current_page,t[50]=e.last_page,t[51]=f):f=t[51];let C;return t[52]!==b||t[53]!==S||t[54]!==m||t[55]!==N||t[56]!==f?(C=s.jsxs(we,{header:b,children:[S,m,N,f]}),t[52]=b,t[53]=S,t[54]=m,t[55]=N,t[56]=f,t[57]=C):C=t[57],C}function We(t){return t.id}function Oe(t){return{label:s.jsxs("span",{className:"flex items-center gap-1",children:[t.icon," ",t.label]}),value:t.value}}function Ve(t){return ee.visit(Q("admin.certificate.edit",t))}function Ge(){return re.error("Failed to update order")}function qe(){return re.success("Order updated!")}function He(t){return{id:t.id,display_order:t.display_order}}function Je(t,e){return{...t,display_order:e}}export{vt as default};

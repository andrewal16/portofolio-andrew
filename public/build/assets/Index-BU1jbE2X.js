import{c as de,u as me,a as ee,j as s,s as H,r as te,L as fe}from"./app-B6r_TxPj.js";import{u as pe,a as ce,s as ue,b as he,S as ye,v as xe,D as ge,c as je,K as _e,P as be,d as Se,C as ve}from"./sortable.esm-CGZexLxI.js";import{A as we}from"./app-layout-D7rl8n8V.js";import{T as Re,S as ae,a as oe,R as Ne}from"./index-BZ9BXEnJ.js";import{R as Ce}from"./RocketOutlined-DIEW3gEz.js";import{B as se}from"./ContextIsolator-Bw6ExzQV.js";import{s as le}from"./index-B-0cTeuO.js";import{S as Ie}from"./index-BNOpb2lg.js";import{R as Te}from"./PlusOutlined-BILouNqv.js";import{I as ke}from"./index-DAm-49SJ.js";import{R as De}from"./FileImageOutlined-BdlPDr9R.js";import{T as ne}from"./index-y3Adf1Mc.js";import{R as Ee,P as Pe}from"./index-DlGInfqp.js";import{R as ze}from"./EyeOutlined-CM2hfqon.js";import{R as $e}from"./DeleteOutlined-D-hRQ3sF.js";import"./app-CbEWB9i-.js";import"./render-DbXmZ5EJ.js";import"./AntdIcon-CfDRJjfZ.js";import"./SafetyCertificateOutlined-DbWOw5Tm.js";import"./CheckOutlined-0PrG8dNn.js";import"./InfoCircleFilled-CRePx94_.js";import"./CloseOutlined-CdTwbbfa.js";import"./SearchOutlined-WRgWSdTL.js";import"./useMergedMask-DEfdHsZZ.js";import"./useClosable-BnFp-AKn.js";import"./ActionButton-BlecjUrr.js";const{Title:Ae,Text:J}=Re;function Fe(t){const e=de.c(74),{id:K,project:l,onEdit:k,onDelete:i,onView:M}=t;let D;e[0]!==K?(D={id:K},e[0]=K,e[1]=D):D=e[1];const{attributes:Q,listeners:W,setNodeRef:Z,transform:E,transition:O,isDragging:G}=Se(D);let p;e[2]!==E?(p=ve.Transform.toString(E),e[2]=E,e[3]=p):p=e[3];const P=G?.5:1,z=G?"grabbing":"default";let C;e[4]!==p||e[5]!==P||e[6]!==z||e[7]!==O?(C={transform:p,transition:O,opacity:P,cursor:z},e[4]=p,e[5]=P,e[6]=z,e[7]=O,e[8]=C):C=e[8];const $=C;let R;e[9]===Symbol.for("react.memo_cache_sentinel")?(R={ongoing:"blue",completed:"green",upcoming:"orange",paused:"red"},e[9]=R):R=e[9];const re=R;let X;e[10]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(Ee,{style:{fontSize:20}}),e[10]=X):X=e[10];let u;e[11]!==Q||e[12]!==W?(u=s.jsx("div",{...Q,...W,className:"flex cursor-grab items-center justify-center text-gray-400 transition-colors hover:text-gray-600 active:cursor-grabbing",children:X}),e[11]=Q,e[12]=W,e[13]=u):u=e[13];let A;e[14]!==l.thumbnail_url||e[15]!==l.title?(A=s.jsx("div",{className:"flex-shrink-0",children:l.thumbnail_url?s.jsx(ke,{src:l.thumbnail_url,alt:l.title,width:64,height:48,style:{objectFit:"cover",borderRadius:6},preview:!1}):s.jsx("div",{style:{width:64,height:48,borderRadius:6,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(De,{style:{fontSize:20,color:"#bbb"}})})}),e[14]=l.thumbnail_url,e[15]=l.title,e[16]=A):A=e[16];let I;e[17]===Symbol.for("react.memo_cache_sentinel")?(I={fontSize:15},e[17]=I):I=e[17];let n;e[18]!==l.title?(n=s.jsx(J,{strong:!0,style:I,className:"block truncate",children:l.title}),e[18]=l.title,e[19]=n):n=e[19];let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T={fontSize:12},e[20]=T):T=e[20];let h;e[21]!==l.slug?(h=s.jsx(J,{type:"secondary",style:T,children:l.slug}),e[21]=l.slug,e[22]=h):h=e[22];let a;e[23]!==n||e[24]!==h?(a=s.jsxs("div",{className:"min-w-0 flex-1",children:[n,h]}),e[23]=n,e[24]=h,e[25]=a):a=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y={minWidth:100},e[26]=y):y=e[26];let x;e[27]!==l.type?(x=s.jsx("div",{className:"flex-shrink-0",style:y,children:l.type?s.jsx(ne,{color:"purple",children:l.type}):s.jsx(ne,{color:"default",children:"No Type"})}),e[27]=l.type,e[28]=x):x=e[28];const F=re[l.status]||"default";let c;e[29]!==l.status?(c=l.status?.toUpperCase(),e[29]=l.status,e[30]=c):c=e[30];let d;e[31]!==F||e[32]!==c?(d=s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ne,{color:F,children:c})}),e[31]=F,e[32]=c,e[33]=d):d=e[33];let g;e[34]===Symbol.for("react.memo_cache_sentinel")?(g={minWidth:40},e[34]=g):g=e[34];let j;e[35]===Symbol.for("react.memo_cache_sentinel")?(j={fontSize:14,color:"#1890ff"},e[35]=j):j=e[35];let m;e[36]!==l.display_order?(m=s.jsx("div",{className:"flex-shrink-0",style:g,children:s.jsxs(J,{strong:!0,style:j,children:["#",l.display_order]})}),e[36]=l.display_order,e[37]=m):m=e[37];let _;e[38]===Symbol.for("react.memo_cache_sentinel")?(_={minWidth:90},e[38]=_):_=e[38];let b;e[39]===Symbol.for("react.memo_cache_sentinel")?(b={fontSize:12},e[39]=b):b=e[39];const N=l.started_at||"-";let f;e[40]!==N?(f=s.jsx("div",{className:"flex-shrink-0",style:_,children:s.jsx(J,{type:"secondary",style:b,children:N})}),e[40]=N,e[41]=f):f=e[41];let S;e[42]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(ze,{}),e[42]=S):S=e[42];let v;e[43]!==M||e[44]!==l.slug?(v=s.jsx(oe,{title:"View on Portfolio",children:s.jsx(se,{type:"text",icon:S,onClick:()=>M(l.slug),size:"small"})}),e[43]=M,e[44]=l.slug,e[45]=v):v=e[45];let o;e[46]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(Ne,{}),e[46]=o):o=e[46];let r;e[47]!==k||e[48]!==l.slug?(r=s.jsx(oe,{title:"Edit",children:s.jsx(se,{type:"primary",icon:o,onClick:()=>k(l.slug),size:"small"})}),e[47]=k,e[48]=l.slug,e[49]=r):r=e[49];let w;e[50]!==i||e[51]!==l.slug?(w=()=>i(l.slug),e[50]=i,e[51]=l.slug,e[52]=w):w=e[52];let U;e[53]===Symbol.for("react.memo_cache_sentinel")?(U={danger:!0},e[53]=U):U=e[53];let B;e[54]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(oe,{title:"Delete",children:s.jsx(se,{type:"text",danger:!0,icon:s.jsx($e,{}),size:"small"})}),e[54]=B):B=e[54];let L;e[55]!==w?(L=s.jsx(Pe,{title:"Delete Project",description:"Are you sure? This cannot be undone.",onConfirm:w,okText:"Yes, Delete",cancelText:"Cancel",okButtonProps:U,children:B}),e[55]=w,e[56]=L):L=e[56];let V;e[57]!==v||e[58]!==r||e[59]!==L?(V=s.jsx("div",{className:"flex-shrink-0",children:s.jsxs(ae,{children:[v,r,L]})}),e[57]=v,e[58]=r,e[59]=L,e[60]=V):V=e[60];let Y;e[61]!==a||e[62]!==x||e[63]!==d||e[64]!==m||e[65]!==f||e[66]!==V||e[67]!==u||e[68]!==A?(Y=s.jsxs("div",{className:"flex items-center gap-4 p-4",children:[u,A,a,x,d,m,f,V]}),e[61]=a,e[62]=x,e[63]=d,e[64]=m,e[65]=f,e[66]=V,e[67]=u,e[68]=A,e[69]=Y):Y=e[69];let q;return e[70]!==Z||e[71]!==$||e[72]!==Y?(q=s.jsx("div",{ref:Z,style:$,className:"mb-3 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-md",children:Y}),e[70]=Z,e[71]=$,e[72]=Y,e[73]=q):q=e[73],q}function gt(){const t=de.c(58),{projects:e,availableTypes:K,flash:l}=me().props;let k;t[0]!==e.data?(k=e.data||[],t[0]=e.data,t[1]=k):k=t[1];const[i,M]=ee.useState(k),[D,Q]=ee.useState(!1),[W,Z]=ee.useState("all");let E;t[2]===Symbol.for("react.memo_cache_sentinel")?(E={coordinateGetter:ue},t[2]=E):E=t[2];const O=pe(ce(be),ce(_e,E));let G,p;t[3]!==l?(G=()=>{l?.success&&le.success(l.success)},p=[l],t[3]=l,t[4]=G,t[5]=p):(G=t[4],p=t[5]),ee.useEffect(G,p);let P,z;t[6]!==e.data?(P=()=>{M(e.data||[])},z=[e.data],t[6]=e.data,t[7]=P,t[8]=z):(P=t[7],z=t[8]),ee.useEffect(P,z);let C;if(t[9]===Symbol.for("react.memo_cache_sentinel")){C=r=>{const{active:w,over:U}=r;w.id!==U.id&&M(B=>{const L=B.findIndex(ie=>ie.id===w.id),V=B.findIndex(ie=>ie.id===U.id),q=he(B,L,V).map(Ge);return o(q),q})};const o=async r=>{Q(!0);const w=r.map(Oe);te.post(H("admin.project.reorder"),{items:w},{preserveScroll:!0,onSuccess:We,onError:Me,onFinish:()=>Q(!1)})};t[9]=C}else C=t[9];let $;t[10]!==i?($=o=>{te.delete(H("admin.project.destroy",o),{preserveScroll:!0,onSuccess:()=>{le.success("Project deleted!"),M(i.filter(r=>r.slug!==o))}})},t[10]=i,t[11]=$):$=t[11];const R=$,re=Ke,X=Ve;let u;t[12]===Symbol.for("react.memo_cache_sentinel")?(u=o=>{Z(o),te.get(H("admin.project.index"),{type:o==="all"?null:o},{preserveState:!0})},t[12]=u):u=t[12];const A=u;let I;t[13]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(Ae,{level:2,style:{margin:0},children:"Project Management"}),t[13]=I):I=t[13];let n;t[14]!==i.length?(n=s.jsxs("div",{children:[I,s.jsxs(J,{type:"secondary",children:["Drag & drop to reorder â€¢ ",i.length," projects"]})]}),t[14]=i.length,t[15]=n):n=t[15];let T,h;t[16]===Symbol.for("react.memo_cache_sentinel")?(T={width:150},h={value:"all",label:"All Types"},t[16]=T,t[17]=h):(T=t[16],h=t[17]);let a;t[18]!==K?(a=[h,...K.map(Le)],t[18]=K,t[19]=a):a=t[19];let y;t[20]!==W||t[21]!==a?(y=s.jsx(Ie,{value:W,onChange:A,style:T,options:a}),t[20]=W,t[21]=a,t[22]=y):y=t[22];let x;t[23]===Symbol.for("react.memo_cache_sentinel")?(x=H("admin.project.create"),t[23]=x):x=t[23];let F;t[24]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(fe,{href:x,children:s.jsx(se,{type:"primary",icon:s.jsx(Te,{}),size:"large",children:"Add New Project"})}),t[24]=F):F=t[24];let c;t[25]!==y?(c=s.jsxs(ae,{children:[y,F]}),t[25]=y,t[26]=c):c=t[26];let d;t[27]!==c||t[28]!==n?(d=s.jsxs("div",{className:"flex items-center justify-between",children:[n,c]}),t[27]=c,t[28]=n,t[29]=d):d=t[29];let g;t[30]!==D?(g=D&&s.jsx("div",{className:"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-4",children:s.jsx(J,{children:"ðŸ”„ Saving new order..."})}),t[30]=D,t[31]=g):g=t[31];let j;t[32]!==i?(j=i.map(Be),t[32]=i,t[33]=j):j=t[33];let m;if(t[34]!==R||t[35]!==i){let o;t[37]!==R?(o=r=>s.jsx(Fe,{id:r.id,project:r,onEdit:re,onDelete:R,onView:X},r.id),t[37]=R,t[38]=o):o=t[38],m=i.map(o),t[34]=R,t[35]=i,t[36]=m}else m=t[36];let _;t[39]!==m?(_=s.jsx("div",{children:m}),t[39]=m,t[40]=_):_=t[40];let b;t[41]!==j||t[42]!==_?(b=s.jsx(ye,{items:j,strategy:xe,children:_}),t[41]=j,t[42]=_,t[43]=b):b=t[43];let N;t[44]!==O||t[45]!==b?(N=s.jsx(ge,{sensors:O,collisionDetection:je,onDragEnd:C,children:b}),t[44]=O,t[45]=b,t[46]=N):N=t[46];let f;t[47]!==i.length?(f=i.length===0&&s.jsxs("div",{className:"py-16 text-center text-gray-400",children:[s.jsx(Ce,{style:{fontSize:48,marginBottom:16}}),s.jsx("br",{}),s.jsx(J,{type:"secondary",children:"No projects yet. Create your first one!"})]}),t[47]=i.length,t[48]=f):f=t[48];let S;t[49]!==e.current_page||t[50]!==e.last_page?(S=e.last_page>1&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(ae,{children:Array.from({length:e.last_page},(o,r)=>s.jsx(se,{type:e.current_page===r+1?"primary":"default",onClick:()=>te.get(H("admin.project.index",{page:r+1})),children:r+1},r+1))})}),t[49]=e.current_page,t[50]=e.last_page,t[51]=S):S=t[51];let v;return t[52]!==d||t[53]!==g||t[54]!==N||t[55]!==f||t[56]!==S?(v=s.jsxs(we,{header:d,children:[g,N,f,S]}),t[52]=d,t[53]=g,t[54]=N,t[55]=f,t[56]=S,t[57]=v):v=t[57],v}function Be(t){return t.id}function Le(t){return{value:t,label:t}}function Ve(t){return window.open(H("portfolio.project.show",t),"_blank")}function Ke(t){return te.visit(H("admin.project.edit",t))}function Me(){return le.error("Failed to update order")}function We(){return le.success("Order updated!")}function Oe(t){return{id:t.id,display_order:t.display_order}}function Ge(t,e){return{...t,display_order:e}}export{gt as default};

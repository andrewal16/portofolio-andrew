import{a as s,R as W}from"./app-B6r_TxPj.js";import{d as de,m as tt,R as ge}from"./ContextIsolator-Bw6ExzQV.js";import{I as ne,c as R,F as te}from"./AntdIcon-CfDRJjfZ.js";import{a3 as ot,B as nt,I as Te,K as fe,w as st,W as rt,h as at,Z as ct,g as it,m as lt,a as ut,b as Ae,E as ze,c as ke}from"./render-DbXmZ5EJ.js";import{u as mt}from"./useMergedMask-DEfdHsZZ.js";import{R as ft}from"./CloseOutlined-CdTwbbfa.js";import{b as pe}from"./app-layout-D7rl8n8V.js";var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},he.apply(this,arguments)}const gt=(t,e)=>s.createElement(ne,he({},t,{ref:e,icon:dt})),pt=s.forwardRef(gt);var ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ve.apply(this,arguments)}const vt=(t,e)=>s.createElement(ne,ve({},t,{ref:e,icon:ht})),wt=s.forwardRef(vt);var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},we.apply(this,arguments)}const yt=(t,e)=>s.createElement(ne,we({},t,{ref:e,icon:Ct})),$e=s.forwardRef(yt);var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ce.apply(this,arguments)}const bt=(t,e)=>s.createElement(ne,Ce({},t,{ref:e,icon:xt})),It=s.forwardRef(bt);var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ye.apply(this,arguments)}const St=(t,e)=>s.createElement(ne,ye({},t,{ref:e,icon:Et})),Nt=s.forwardRef(St),ue=s.createContext(null);function Mt(t){return new Promise(e=>{if(!t){e(!1);return}const o=document.createElement("img");o.onerror=()=>e(!1),o.onload=()=>e(!0),o.src=t})}function Ye(){const t=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:e}}const ae={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Rt(t,e,o,n){const c=s.useRef(null),r=s.useRef([]),[a,l]=s.useState(ae),f=d=>{l(ae),ot(ae,a)||n?.({transform:ae,action:d})},m=(d,C)=>{c.current===null&&(r.current=[],c.current=nt(()=>{l(h=>{let g=h;return r.current.forEach(y=>{g={...g,...y}}),c.current=null,n?.({transform:g,action:C}),g})})),r.current.push({...a,...d})};return{transform:a,resetTransform:f,updateTransform:m,dispatchZoomChange:(d,C,h,g,y)=>{const{width:w,height:I,offsetWidth:i,offsetHeight:u,offsetLeft:E,offsetTop:x}=t.current;let b=d,p=a.scale*d;p>o?(p=o,b=o/a.scale):p<e&&(p=y?p:e,b=p/a.scale);const P=h??innerWidth/2,$=g??innerHeight/2,S=b-1,O=S*w*.5,T=S*I*.5,z=S*(P-a.x-E),k=S*($-a.y-x);let M=a.x-(z-O),L=a.y-(k-T);if(d<1&&p===1){const B=i*p,D=u*p,{width:j,height:N}=Ye();B<=j&&D<=N&&(M=0,L=0)}m({x:M,y:L,scale:p},C)}}}function Le(t,e,o,n){const c=e+o,r=(o-n)/2;if(o>n){if(e>0)return{[t]:r};if(e<0&&c<n)return{[t]:-r}}else if(e<0||c>n)return{[t]:e<0?r:-r};return{}}function De(t,e,o,n){const{width:c,height:r}=Ye();let a=null;return t<=c&&e<=r?a={x:0,y:0}:(t>c||e>r)&&(a={...Le("x",o,t,c),...Le("y",n,e,r)}),a}const ee=1,Pt=1;function Ot(t,e,o,n,c,r,a){const{rotate:l,scale:f,x:m,y:v}=c,[d,C]=s.useState(!1),h=s.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),g=i=>{!e||i.button!==0||(i.preventDefault(),i.stopPropagation(),h.current={diffX:i.pageX-m,diffY:i.pageY-v,transformX:m,transformY:v},C(!0))},y=i=>{o&&d&&r({x:i.pageX-h.current.diffX,y:i.pageY-h.current.diffY},"move")},w=()=>{if(o&&d){C(!1);const{transformX:i,transformY:u}=h.current;if(!(m!==i&&v!==u))return;const x=t.current.offsetWidth*f,b=t.current.offsetHeight*f,{left:p,top:P}=t.current.getBoundingClientRect(),$=l%180!==0,S=De($?b:x,$?x:b,p,P);S&&r({...S},"dragRebound")}},I=i=>{if(!o||i.deltaY==0)return;const u=Math.abs(i.deltaY/100),E=Math.min(u,Pt);let x=ee+E*n;i.deltaY>0&&(x=ee/x),a(x,"wheel",i.clientX,i.clientY)};return s.useEffect(()=>{if(e){window.addEventListener("mouseup",w,!1),window.addEventListener("mousemove",y,!1);try{window.top!==window.self&&(window.top.addEventListener("mouseup",w,!1),window.top.addEventListener("mousemove",y,!1))}catch{}}return()=>{window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",y);try{window.top?.removeEventListener("mouseup",w),window.top?.removeEventListener("mousemove",y)}catch{}}},[o,d,m,v,l,e]),{isMoving:d,onMouseDown:g,onMouseMove:y,onMouseUp:w,onWheel:I}}function Xe({src:t,isCustomPlaceholder:e,fallback:o}){const[n,c]=s.useState(e?"loading":"normal"),r=s.useRef(!1),a=n==="error";s.useEffect(()=>{let v=!0;return Mt(t).then(d=>{!d&&v&&c("error")}),()=>{v=!1}},[t]),s.useEffect(()=>{e&&!r.current?c("loading"):a&&c("normal")},[t]);const l=()=>{c("normal")};return[v=>{r.current=!1,n==="loading"&&v?.complete&&(v.naturalWidth||v.naturalHeight)&&(r.current=!0,l())},a&&o?{src:o}:{onLoad:l,src:t},n]}function ce(t,e){const o=t.x-e.x,n=t.y-e.y;return Math.hypot(o,n)}function $t(t,e,o,n){const c=ce(t,o),r=ce(e,n);if(c===0&&r===0)return[t.x,t.y];const a=c/(c+r),l=t.x+a*(e.x-t.x),f=t.y+a*(e.y-t.y);return[l,f]}function Lt(t,e,o,n,c,r,a){const{rotate:l,scale:f,x:m,y:v}=c,[d,C]=s.useState(!1),h=s.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),g=i=>{h.current={...h.current,...i}},y=i=>{if(!e)return;i.stopPropagation(),C(!0);const{touches:u=[]}=i;u.length>1?g({point1:{x:u[0].clientX,y:u[0].clientY},point2:{x:u[1].clientX,y:u[1].clientY},eventType:"touchZoom"}):g({point1:{x:u[0].clientX-m,y:u[0].clientY-v},eventType:"move"})},w=i=>{const{touches:u=[]}=i,{point1:E,point2:x,eventType:b}=h.current;if(u.length>1&&b==="touchZoom"){const p={x:u[0].clientX,y:u[0].clientY},P={x:u[1].clientX,y:u[1].clientY},[$,S]=$t(E,x,p,P),O=ce(p,P)/ce(E,x);a(O,"touchZoom",$,S,!0),g({point1:p,point2:P,eventType:"touchZoom"})}else b==="move"&&(r({x:u[0].clientX-E.x,y:u[0].clientY-E.y},"move"),g({eventType:"move"}))},I=()=>{if(!o)return;if(d&&C(!1),g({eventType:"none"}),n>f)return r({x:0,y:0,scale:n},"touchZoom");const i=t.current.offsetWidth*f,u=t.current.offsetHeight*f,{left:E,top:x}=t.current.getBoundingClientRect(),b=l%180!==0,p=De(b?u:i,b?i:u,E,x);p&&r({...p},"dragRebound")};return s.useEffect(()=>{const i=u=>{u.preventDefault()};return o&&e&&window.addEventListener("touchmove",i,{passive:!1}),()=>{window.removeEventListener("touchmove",i)}},[o,e]),{isTouching:d,onTouchStart:y,onTouchMove:w,onTouchEnd:I}}function jt(t){const{prefixCls:e,icon:o,onClick:n}=t;return s.createElement("button",{className:`${e}-close`,onClick:n},o)}function Tt(t){const{prefixCls:e,showProgress:o,current:n,count:c,showSwitch:r,classNames:a,styles:l,icons:f,image:m,transform:v,countRender:d,actionsRender:C,scale:h,minScale:g,maxScale:y,onActive:w,onFlipY:I,onFlipX:i,onRotateLeft:u,onRotateRight:E,onZoomOut:x,onZoomIn:b,onClose:p,onReset:P}=t,{left:$,right:S,prev:O,next:T,flipY:z,flipX:k,rotateLeft:M,rotateRight:L,zoomOut:B,zoomIn:D}=f,j=o&&s.createElement("div",{className:`${e}-progress`},d?d(n+1,c):s.createElement("bdi",null,`${n+1} / ${c}`)),N=`${e}-actions-action`,A=({type:K,disabled:q,onClick:me,icon:se})=>s.createElement("div",{key:K,className:R(N,`${N}-${K}`,{[`${N}-disabled`]:!!q}),onClick:me},se),X=r?A({icon:O??$,onClick:()=>w(-1),type:"prev",disabled:n===0}):void 0,H=r?A({icon:T??S,onClick:()=>w(1),type:"next",disabled:n===c-1}):void 0,V=A({icon:z,onClick:I,type:"flipY"}),G=A({icon:k,onClick:i,type:"flipX"}),J=A({icon:M,onClick:u,type:"rotateLeft"}),Y=A({icon:L,onClick:E,type:"rotateRight"}),Z=A({icon:B,onClick:x,type:"zoomOut",disabled:h<=g}),Q=A({icon:D,onClick:b,type:"zoomIn",disabled:h===y}),U=s.createElement("div",{className:R(`${e}-actions`,a.actions),style:l.actions},V,G,J,Y,Z,Q);return s.createElement("div",{className:R(`${e}-footer`,a.footer),style:l.footer},j,C?C(U,{icons:{prevIcon:X,nextIcon:H,flipYIcon:V,flipXIcon:G,rotateLeftIcon:J,rotateRightIcon:Y,zoomOutIcon:Z,zoomInIcon:Q},actions:{onActive:w,onFlipY:I,onFlipX:i,onRotateLeft:u,onRotateRight:E,onZoomOut:x,onZoomIn:b,onReset:P,onClose:p},transform:v,current:n,total:c,image:m}):U)}function At(t){const{prefixCls:e,onActive:o,current:n,count:c,icons:{left:r,right:a,prev:l,next:f}}=t,m=`${e}-switch`;return s.createElement(s.Fragment,null,s.createElement("div",{className:R(m,`${m}-prev`,{[`${m}-disabled`]:n===0}),onClick:()=>o(-1)},l??r),s.createElement("div",{className:R(m,`${m}-next`,{[`${m}-disabled`]:n===c-1}),onClick:()=>o(1)},f??a))}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ie.apply(this,arguments)}const zt=({fallback:t,src:e,imgRef:o,...n})=>{const[c,r]=Xe({src:e,fallback:t});return W.createElement("img",ie({ref:a=>{o.current=a,c(a)}},n,r))},He=t=>{const{prefixCls:e,rootClassName:o,src:n,alt:c,imageInfo:r,fallback:a,movable:l=!0,onClose:f,open:m,afterOpenChange:v,icons:d={},closeIcon:C,getContainer:h,current:g=0,count:y=1,countRender:w,scaleStep:I=.5,minScale:i=1,maxScale:u=50,motionName:E="fade",imageRender:x,imgCommonProps:b,actionsRender:p,onTransform:P,onChange:$,classNames:S={},styles:O={},mousePosition:T,zIndex:z}=t,k=s.useRef(),M=s.useContext(ue),L=M&&y>1,B=M&&y>=1,[D,j]=s.useState(!0),{transform:N,resetTransform:A,updateTransform:X,dispatchZoomChange:H}=Rt(k,i,u,P),{isMoving:V,onMouseDown:G,onWheel:J}=Ot(k,l,m,I,N,X,H),{isTouching:Y,onTouchStart:Z,onTouchMove:Q,onTouchEnd:U}=Lt(k,l,m,i,N,X,H),{rotate:K,scale:q}=N;s.useEffect(()=>{D||j(!0)},[D]),s.useEffect(()=>{m||A("close")},[m]);const me=_=>{m&&(q!==1?X({x:0,y:0,scale:1},"doubleClick"):H(ee+I,"doubleClick",_.clientX,_.clientY))},se=W.createElement(zt,ie({},b,{width:t.width,height:t.height,imgRef:k,className:`${e}-img`,alt:c,style:{transform:`translate3d(${N.x}px, ${N.y}px, 0) scale3d(${N.flipX?"-":""}${q}, ${N.flipY?"-":""}${q}, 1) rotate(${K}deg)`,transitionDuration:(!D||Y)&&"0s"},fallback:a,src:n,onWheel:J,onMouseDown:G,onDoubleClick:me,onTouchStart:Z,onTouchMove:Q,onTouchEnd:U,onTouchCancel:U})),Se={url:n,alt:c,...r},We=()=>{H(ee+I,"zoomIn")},Fe=()=>{H(ee/(ee+I),"zoomOut")},Ve=()=>{X({rotate:K+90},"rotateRight")},Ge=()=>{X({rotate:K-90},"rotateLeft")},Ue=()=>{X({flipX:!N.flipX},"flipX")},Qe=()=>{X({flipY:!N.flipY},"flipY")},Je=()=>{A("reset")},re=_=>{const F=g+_;F>=0&&F<=y-1&&(j(!1),A(_<0?"prev":"next"),$?.(F,g))},Ne=Te(_=>{if(m){const{keyCode:F}=_;F===fe.ESC&&f?.(),L&&(F===fe.LEFT?re(-1):F===fe.RIGHT&&re(1))}});s.useEffect(()=>{if(m)return window.addEventListener("keydown",Ne),()=>{window.removeEventListener("keydown",Ne)}},[m]);const[Ke,Me]=s.useState(!1);W.useEffect(()=>{m&&Me(!0)},[m]);const qe=_=>{_||Me(!1),v?.(_)},[Re,et]=s.useState(!1);st(()=>{m&&et(!0)},[m]);const Pe={...O.body};return T&&(Pe.transformOrigin=`${T.x}px ${T.y}px`),W.createElement(rt,{open:Re,getContainer:h,autoLock:Ke},W.createElement(at,{motionName:E,visible:Re&&m,motionAppear:!0,motionEnter:!0,motionLeave:!0,onVisibleChanged:qe},({className:_,style:F})=>{const Oe={...O.root,...F};return z&&(Oe.zIndex=z),W.createElement("div",{className:R(e,o,S.root,_,{[`${e}-moving`]:V}),style:Oe},W.createElement("div",{className:R(`${e}-mask`,S.mask),style:O.mask,onClick:f}),W.createElement("div",{className:R(`${e}-body`,S.body),style:Pe},x?x(se,{transform:N,image:Se,...M?{current:g}:{}}):se),C!==!1&&C!==null&&W.createElement(jt,{prefixCls:e,icon:C===!0?d.close:C||d.close,onClick:f}),L&&W.createElement(At,{prefixCls:e,current:g,count:y,icons:d,onActive:re}),W.createElement(Tt,{prefixCls:e,showProgress:B,current:g,count:y,showSwitch:L,classNames:S,styles:O,image:Se,transform:N,icons:d,countRender:w,actionsRender:p,scale:q,minScale:i,maxScale:u,onActive:re,onFlipY:Qe,onFlipX:Ue,onRotateLeft:Ge,onRotateRight:Ve,onZoomOut:Fe,onZoomIn:We,onClose:f,onReset:Je}))}))},xe=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function kt(t){const[e,o]=s.useState({}),n=s.useCallback((r,a)=>(o(l=>({...l,[r]:a})),()=>{o(l=>{const f={...l};return delete f[r],f})}),[]);return[s.useMemo(()=>t?t.map(r=>{if(typeof r=="string")return{data:{src:r}};const a={};return Object.keys(r).forEach(l=>{["src",...xe].includes(l)&&(a[l]=r[l])}),{data:a}}):Object.keys(e).reduce((r,a)=>{const{canPreview:l,data:f}=e[a];return l&&r.push({data:f,id:a}),r},[]),[t,e]),n,!!t]}function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},be.apply(this,arguments)}const Yt=({previewPrefixCls:t="rc-image-preview",classNames:e,styles:o,children:n,icons:c={},items:r,preview:a,fallback:l})=>{const{open:f,onOpenChange:m,current:v,onChange:d,...C}=a&&typeof a=="object"?a:{},[h,g,y]=kt(r),[w,I]=de(0,v),[i,u]=s.useState(!1),{src:E,...x}=h[w]?.data||{},[b,p]=de(!!f,f),P=Te(M=>{p(M),M!==b&&m?.(M,{current:w})}),[$,S]=s.useState(null),O=s.useCallback((M,L,B,D)=>{const j=y?h.findIndex(N=>N.data.src===L):h.findIndex(N=>N.id===M);I(j<0?0:j),P(!0),S({x:B,y:D}),u(!0)},[h,y]);s.useEffect(()=>{b?i||I(0):u(!1)},[b]);const T=(M,L)=>{I(M),d?.(M,L)},z=()=>{P(!1),S(null)},k=s.useMemo(()=>({register:g,onPreview:O}),[g,O]);return s.createElement(ue.Provider,{value:k},n,s.createElement(He,be({"aria-hidden":!b,open:b,prefixCls:t,onClose:z,mousePosition:$,imgCommonProps:x,src:E,fallback:l,icons:c,current:w,count:h.length,onChange:T},C,{classNames:e?.popup,styles:o?.popup})))};let je=0;function Dt(t,e){const[o]=s.useState(()=>(je+=1,String(je))),n=s.useContext(ue),c={data:e,canPreview:t};return s.useEffect(()=>{if(n)return n.register(o,c)},[]),s.useEffect(()=>{n&&n.register(o,c)},[t,e]),o}function oe(){return oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},oe.apply(this,arguments)}const Ee=t=>{const{prefixCls:e="rc-image",previewPrefixCls:o=`${e}-preview`,rootClassName:n,className:c,style:r,classNames:a={},styles:l={},width:f,height:m,src:v,alt:d,placeholder:C,fallback:h,preview:g=!0,onClick:y,onError:w,...I}=t,i=s.useContext(ue),u=!!g,{src:E,open:x,onOpenChange:b,cover:p,rootClassName:P,...$}=g&&typeof g=="object"?g:{},S=typeof p=="object"&&p.placement&&p.placement||"center",O=typeof p=="object"&&p.coverNode?p.coverNode:p,[T,z]=de(!!x,x),[k,M]=s.useState(null),L=Y=>{z(Y),b?.(Y)},B=()=>{L(!1)},D=C&&C!==!0,j=E??v,[N,A,X]=Xe({src:v,isCustomPlaceholder:D,fallback:h}),H=s.useMemo(()=>{const Y={};return xe.forEach(Z=>{t[Z]!==void 0&&(Y[Z]=t[Z])}),Y},xe.map(Y=>t[Y])),V=s.useMemo(()=>({...H,src:j}),[j,H]),G=Dt(u,V),J=Y=>{const Z=Y.target.getBoundingClientRect(),Q=Z.x+Z.width/2,U=Z.y+Z.height/2;i?i.onPreview(G,j,Q,U):(M({x:Q,y:U}),L(!0)),y?.(Y)};return s.createElement(s.Fragment,null,s.createElement("div",oe({},I,{className:R(e,n,a.root,{[`${e}-error`]:X==="error"}),onClick:u?J:y,style:{width:f,height:m,...l.root}}),s.createElement("img",oe({},H,{className:R(`${e}-img`,{[`${e}-img-placeholder`]:C===!0},a.image,c),style:{height:m,...l.image,...r},ref:N},A,{width:f,height:m,onError:w})),X==="loading"&&s.createElement("div",{"aria-hidden":"true",className:`${e}-placeholder`},C),p!==!1&&u&&s.createElement("div",{className:R(`${e}-cover`,a.cover,`${e}-cover-${S}`),style:{display:r?.display==="none"?"none":void 0,...l.cover}},O)),!i&&u&&s.createElement(He,oe({"aria-hidden":!T,open:T,prefixCls:o,onClose:B,mousePosition:k,src:j,alt:d,imageInfo:{width:f,height:m},fallback:h,imgCommonProps:H},$,{classNames:a?.popup,styles:l?.popup,rootClassName:R(P,n)})))};Ee.PreviewGroup=Yt;const Ze=(t,e,o,n,c,r,a)=>{const[l]=ct("ImagePreview",t?.zIndex),[f,m]=mt(t?.mask,e?.mask,`${o}-preview`);return W.useMemo(()=>{if(!t)return t;const{cover:v,getContainer:d,closeIcon:C,rootClassName:h}=t,{closeIcon:g}=e??{};return{motionName:tt(`${o}-preview`,"fade"),...t,...a?{cover:v??a}:{},icons:r,getContainer:d??c,zIndex:l,closeIcon:C??g,rootClassName:R(n,h),mask:f,blurClassName:m.mask}},[t,e,o,n,c,a,r,l,f,m])};function Xt(t){return s.isValidElement(t)?[t,void 0]:typeof t=="boolean"||t&&typeof t=="object"?[void 0,t]:[void 0,void 0]}function le(t){const e=s.useMemo(()=>typeof t=="boolean"?t?{}:null:t&&typeof t=="object"?t:{},[t]);return s.useMemo(()=>{if(!e)return[e,"",""];const{open:n,onOpenChange:c,cover:r,actionsRender:a,visible:l,onVisibleChange:f,rootClassName:m,maskClassName:v,mask:d,forceRender:C,destroyOnClose:h,toolbarRender:g,...y}=e;let w;c?w=c:f&&(w=(u,E)=>{const{current:x}=E||{};x!==void 0?f(u,!u,x):f(u,!u)});const[I,i]=Xt(d);return[{...y,open:n??l,onOpenChange:w,cover:r??I,mask:i,actionsRender:a??g},m,v]},[e])}const Be=t=>({position:t||"absolute",inset:0}),Ht=t=>{const{componentCls:e,motionDurationSlow:o,colorTextLightSolid:n}=t;return{[e]:{[`${e}-cover`]:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:n,background:new te("#000").setA(.3).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${o}`},"&:hover":{[`${e}-cover`]:{opacity:1}},[`${e}-cover-top`]:{inset:"0 0 auto 0",justifyContent:"center"},[`${e}-cover-bottom`]:{inset:"auto 0 0 0",justifyContent:"center"}}}},Zt=t=>{const{motionEaseOut:e,previewCls:o,motionDurationSlow:n,componentCls:c,colorBgMask:r,marginXL:a,marginSM:l,margin:f,colorTextLightSolid:m,paddingSM:v,paddingLG:d,previewOperationHoverColor:C,previewOperationColorDisabled:h,previewOperationSize:g,zIndexPopup:y}=t,w=new te(r).setA(.1),I=w.clone().setA(.2),i={position:"absolute",color:m,backgroundColor:w.toRgbString(),borderRadius:"50%",padding:v,outline:0,border:0,cursor:"pointer",transition:`all ${n}`,display:"flex",fontSize:g,"&:hover":{backgroundColor:I.toRgbString()},"&:active":{backgroundColor:w.toRgbString()}};return{[`${c}-preview`]:{textAlign:"center",inset:0,position:"fixed",userSelect:"none",zIndex:y,[`${o}-mask`]:{inset:0,position:"absolute",background:r,[`&${c}-preview-mask-blur`]:{backdropFilter:"blur(4px)"},[`&${c}-preview-mask-hidden`]:{display:"none"}},[`${o}-body`]:{...Be(),"pointer-events":"none",display:"flex",alignItems:"center",justifyContent:"center","> *":{pointerEvents:"auto"}},[`${o}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${n} ${e} 0s`},[`&-moving ${o}-img`]:{cursor:"grabbing"},[`${o}-close`]:{...i,top:l,insetInlineEnd:l},[`${o}-switch`]:{...i,top:"50%",transform:"translateY(-50%)","&-disabled":{"&, &:hover, &:active":{color:h,background:"transparent",cursor:"not-allowed"}},"&-prev":{insetInlineStart:l},"&-next":{insetInlineEnd:l}},[`${o}-footer`]:{position:"absolute",bottom:a,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:t.previewOperationColor,transform:"translateX(-50%)",gap:f},[`${o}-actions`]:{display:"flex",gap:v,padding:`0 ${ut(d)}`,backgroundColor:w.toRgbString(),borderRadius:100,fontSize:g,"&-action":{padding:v,cursor:"pointer",transition:`all ${n}`,display:"flex",[`&:not(${o}-actions-action-disabled):hover`]:{color:C},"&-disabled":{color:h,cursor:"not-allowed"}}}}}},Bt=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",display:"inline-block",[`${e}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${e}-img-placeholder`]:{backgroundColor:t.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${e}-placeholder`]:{...Be()}}}},_t=t=>{const{previewCls:e,motionDurationSlow:o}=t;return{[e]:{"&-fade":{transition:`opacity ${o}`,"&-enter, &-appear":{opacity:0,[`${e}-body`]:{transform:"scale(0)"},"&-active":{opacity:1,[`${e}-body`]:{transform:"scale(1)",transition:`transform ${o}`}}},"&-leave":{opacity:1,"&-active":{opacity:0,[`${e}-body`]:{transform:"scale(0)",transition:`transform ${o}`}}}}}}},Wt=t=>({zIndexPopup:t.zIndexPopupBase+80,previewOperationColor:new te(t.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new te(t.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new te(t.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:t.fontSizeIcon*1.5}),_e=it("Image",t=>{const e=`${t.componentCls}-preview`,o=lt(t,{previewCls:e,imagePreviewSwitchSize:t.controlHeightLG});return[Bt(o),Ht(o),Zt(o),_t(o)]},Wt),Ie={rotateLeft:s.createElement(pt,null),rotateRight:s.createElement(wt,null),zoomIn:s.createElement(It,null),zoomOut:s.createElement(Nt,null),close:s.createElement(ft,null),left:s.createElement(pe,null),right:s.createElement(ge,null),flipX:s.createElement($e,null),flipY:s.createElement($e,{rotate:90})},Ft=({previewPrefixCls:t,preview:e,classNames:o,styles:n,...c})=>{const{getPrefixCls:r,getPopupContainer:a,direction:l,preview:f,classNames:m,styles:v}=Ae("image"),d=r("image",t),C=`${d}-preview`,h=ze(d),[g,y]=_e(d,h),w=R(g,y,h),[I,i,u]=le(e),[E,x,b]=le(f),p=s.useMemo(()=>({...Ie,left:l==="rtl"?s.createElement(ge,null):s.createElement(pe,null),right:l==="rtl"?s.createElement(pe,null):s.createElement(ge,null)}),[l]),P=Ze(I,E,d,w,a,Ie),{mask:$,blurClassName:S}=P??{},O={...c,classNames:o,styles:n},[T,z]=ke([m,o,{cover:R(b,u),popup:{root:R(x,i),mask:R({[`${d}-preview-mask-hidden`]:!$},S)}}],[v,n],{props:O},{popup:{_default:"root"}});return s.createElement(Ee.PreviewGroup,{preview:P,previewPrefixCls:C,icons:p,...c,classNames:T,styles:z})},Vt=t=>{const{prefixCls:e,preview:o,className:n,rootClassName:c,style:r,styles:a,classNames:l,wrapperStyle:f,fallback:m,...v}=t,{getPrefixCls:d,getPopupContainer:C,className:h,style:g,preview:y,styles:w,classNames:I,fallback:i}=Ae("image"),u=d("image",e),E=ze(u),[x,b]=_e(u,E),p=R(c,x,b,E),P=R(n,x,h),[$,S,O]=le(o),[T,z,k]=le(y),M=Ze($,T,u,p,C,Ie,!0),L={...t,preview:M},B=s.useMemo(()=>({cover:R(k,O),popup:{root:R(z,S)}}),[S,O,z,k]),{mask:D,blurClassName:j}=M??{},N=s.useMemo(()=>({mask:R({[`${u}-preview-mask-hidden`]:!D},j)}),[D,u,j]),A=s.useMemo(()=>[I,l,B,{popup:N}],[I,l,B,N]),[X,H]=ke(A,[w,{root:f},a],{props:L},{popup:{_default:"root"}}),V={...g,...r},G=m??i;return s.createElement(Ee,{prefixCls:u,preview:M||!1,rootClassName:p,className:P,style:V,fallback:G,...v,classNames:X,styles:H})};Vt.PreviewGroup=Ft;export{Vt as I};
